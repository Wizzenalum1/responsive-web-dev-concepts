<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            background-color: darkred;
            color: whitesmoke;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <h1>what is call back function</h1>
    <p>it is function which is passed to the function then this another function call it, it make java scipt powerfull, by useing this java script can have syncronous code in even java script is asyncronous</p>
    <h1>promises</h1>
    <p>it is another way to create synchronous features in javascript but avoid the callback hell.</p>
    <h1>what is  async await.</h1>


    <script>
        // // example 1 to understand the callback function
        // function x(y){
        //     console.log("x");
        //     y();
        // }
        // x(function y(){
        //     console.log("y");
        // });
        // // example 2
        // setTimeout(function(){
        //     console.log("timer")
        // },3000);

        // example 3 little complex
        const posts = [
            {title:"p1",body:"this is one"},
            {title:"p2",body:"this is two"}
        ];
        // function createPost(post,callback){
        //     post =`<li>${post.body} </li>`;
        //     callback(post);
        // }

        // function getPosts(){
        //     setTimeout(()=>{
        //         let output = "";
        //         posts.forEach((post, index)=>{
        //             output+=`<li>${post.body} + ${index}</li>`
        //         });
        //         document.body.innerHTML += output;
        //     }, 3000)
        // }
        // function callback(post){
        //         setTimeout(()=>{
        //         document.body.innerHTML += post;
        //         // callback();
        //     },2000)
        // }
        // createPost({title:"p3",body:"this is three"},callback);
                
        // getPosts();

    // promise  example 1
    //     function createPost(post){
    //         return new Promise((resolve,reject)=>{
    //             setTimeout(()=>{
    //                 posts.push(post);
    //                 const error = true;
    //                 if(!error){
    //                     resolve();
    //                 }else{
    //                     reject("Errror");
    //                 }
    //             },2000)
    //         });
    //     }
    //     createPost({title:"p3",body:"this is three"}).then(getPosts).catch(err=>{console.log(err)});
    // // promise example 2 did'nt get this one.
    //     const promise1 = Promise.resolve("hello");
    //     const promise2 = 10;
    //     const promise3 = new Promise((resove,reject)=>{
    //         setTimeout(resolve,2000,'message from settimeout')
    //     });
    //     const promise4 = fetch('get').then(res=>res.json());
    //     Promise.all([promise1,promise2,promise3,promise4]).then(values =>console.log(values))

// async await
    // async function init(){
    //     await createPost({title:"p3",body:"this is three"});
    //     getPost();
    // }
    // init();
    // let fs = require('fs');

// // how long can this code executed 
//     let x = 0;
//     async function test(){
//         x += await 2;
//         console.log(x);
//     }
//     test();
//     x+=1;
//     console.log(x);
    async function errorExample(){
        try{
            const rejectedPromise = await Promise.reject();
        }catch(error){
            console.log(error);
        }
    }
    errorExample();

    </script>
</body>
</html>